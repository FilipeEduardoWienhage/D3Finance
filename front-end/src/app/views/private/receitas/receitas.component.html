<div class="min-h-screen flex flex-col bg-[#1e1e1e]">
  <app-header-system></app-header-system>

  <div class="flex flex-row flex-grow px-4 gap-4">
    <div class="flex-shrink-0">
      <app-nav-bar-system></app-nav-bar-system>
      <p-toast></p-toast>
    </div>

    <div class="flex flex-col flex-grow gap-y-6">

      <div class="flex flex-col space-y-4">
        <p-card header="Receitas por Mês" class="bg-[#2c2c2c] text-white rounded-xl">
          <div class="flex items-center gap-4 p-4 bg-[#2c2c2c] rounded-lg">
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Filtrar por Categoria</label>
              <p-dropdown [options]="categoriasOpcoes" [(ngModel)]="filtroMensal.categoria"
                optionLabel="label" optionValue="value"
                placeholder="Todas as categorias" (ngModelChange)="filtrarDadosMensais()"
                [style]="{ 'width': '250px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Filtrar por Conta</label>
              <p-dropdown [options]="contasOpcoes" [(ngModel)]="filtroMensal.conta_id"
                optionLabel="label" optionValue="value"
                placeholder="Todas as contas" (ngModelChange)="filtrarDadosMensais()"
                [style]="{ 'width': '200px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Forma de Recebimento</label>
              <p-dropdown [options]="formasRecebimentoOpcoes" [(ngModel)]="filtroMensal.forma_recebimento"
                optionLabel="label" optionValue="value"
                placeholder="Todas as formas" (ngModelChange)="filtrarDadosMensais()"
                [style]="{ 'width': '200px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col justify-end">
              <label class="text-sm mb-1 invisible">.</label>
              <button pButton type="button" label="Limpar filtro" icon="pi pi-times" class="p-button-secondary"
                (click)="limparFiltrosMensais()"></button>
            </div>
          </div>
          <div class="h-[30rem]">
            <p-chart type="bar" [data]="dataMensal" [options]="optionsMensal" style="height: 100%"></p-chart>
          </div>
        </p-card>
      </div>

      <div class="flex flex-col space-y-4">
        <p-card header="Receitas por Categoria" class="bg-[#2c2c2c] text-white rounded-xl">
          <div class="flex items-center gap-4 p-4 bg-[#2c2c2c] rounded-lg">
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Filtrar por Mês/Ano</label>
              <p-calendar [(ngModel)]="filtroConsolidado.dataSelecionada" view="month" dateFormat="mm/yy"
                [readonlyInput]="true" placeholder="Selecione o período" (onSelect)="filtrarDados()" [showClear]="true"></p-calendar>
            </div>
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Filtrar por Categoria</label>
              <p-dropdown [options]="categoriasOpcoes" [(ngModel)]="filtroConsolidado.categoria"
                optionLabel="label" optionValue="value"
                placeholder="Todas as categorias" (ngModelChange)="filtrarDados()" [style]="{ 'width': '250px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Filtrar por Conta</label>
              <p-dropdown [options]="contasOpcoes" [(ngModel)]="filtroConsolidado.conta_id"
                optionLabel="label" optionValue="value"
                placeholder="Todas as contas" (ngModelChange)="filtrarDados()" [style]="{ 'width': '200px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col">
              <label class="text-sm text-gray-400 mb-1">Forma de Recebimento</label>
              <p-dropdown [options]="formasRecebimentoOpcoes" [(ngModel)]="filtroConsolidado.forma_recebimento"
                optionLabel="label" optionValue="value"
                placeholder="Todas as formas" (ngModelChange)="filtrarDados()" [style]="{ 'width': '200px' }" [showClear]="true"></p-dropdown>
            </div>
            <div class="flex flex-col justify-end">
              <label class="text-sm mb-1 invisible">.</label>
              <button pButton type="button" label="Limpar filtro" icon="pi pi-times" class="p-button-secondary"
                (click)="limparFiltros()"></button>
            </div>
          </div>
          <div class="h-[30rem]">
            <p-chart type="bar" [data]="dataConsolidado" [options]="optionsConsolidado" style="height: 100%"></p-chart>
          </div>
        </p-card>
      </div>

    </div>
  </div>

  <app-footer class="mt-auto"></app-footer>
</div>