<div class="min-h-screen flex flex-col bg-[#1e1e1e]">
    <app-header-system></app-header-system>

    <div class="flex flex-row flex-grow px-4 gap-4">
        <div class="flex-shrink-0">
            <app-nav-bar-system></app-nav-bar-system>
            <p-toast></p-toast>
        </div>

        <div class="flex flex-col flex-grow space-y-6 items-center">

            <div class="text-center mb-6">
                <h2 class="text-3xl font-bold text-white mb-4">Assistente de Relatórios Inteligentes</h2>
                <p class="text-gray-300 text-lg max-w-3xl">
                    Crie relatórios profissionais de forma rápida e eficiente. Escolha um modelo predefinido.
                </p>
            </div>

            <p-card header="Configurações do Relatório" class="w-full max-w-6xl">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="flex flex-col gap-2">
                        <label for="modeloRelatorio">Período</label>
                        <p-select 
                            [options]="modelosRelatorios" 
                            [(ngModel)]="modeloSelecionado"
                            optionLabel="nome" 
                            placeholder="Selecione o modelo"
                            (onChange)="selecionarModelo($event.value)"
                            class="w-full">
                        </p-select>
                    </div>

                    <div class="flex flex-col gap-2" *ngIf="modeloSelecionado?.id === 'mensal' || modeloSelecionado?.id === 'detalhado'">
                        <label for="mes">Mês</label>
                        <p-select 
                            [options]="meses" 
                            [(ngModel)]="mesSelecionado"
                            optionLabel="label" 
                            optionValue="value" 
                            placeholder="Selecione o mês"
                            (onChange)="atualizarDatas()"
                            class="w-full">
                        </p-select>
                    </div>

                    <div class="flex flex-col gap-2" *ngIf="modeloSelecionado?.id === 'mensal' || modeloSelecionado?.id === 'anual'">
                        <label for="ano">Ano</label>
                        <p-select 
                            [options]="anos" 
                            [(ngModel)]="anoSelecionado"
                            optionLabel="label"
                            optionValue="value"
                            placeholder="Selecione o ano"
                            (onChange)="atualizarDatas()"
                            class="w-full">
                        </p-select>
                    </div>
                </div>

                <div class="flex justify-center gap-4 mt-6">
                    <p-button 
                        (click)="limparRelatorio()" 
                        label="Remover" 
                        icon="pi pi-trash"
                        class="w-48"
                        styleClass="p-button-danger">
                    </p-button>
                </div>
            </p-card>

            <p-card header="Editor de Relatório" class="w-full max-w-6xl">
                <div class="mb-4">
                    <p-editor 
                        [(ngModel)]="text" 
                        name="content" 
                        [style]="{ height: '500px' }" 
                        placeholder="Selecione um modelo e período para gerar o relatório..."
                        required>
                    </p-editor>
                </div>

                <div class="flex flex-wrap justify-center gap-4">
                    <p-button 
                        (click)="salvarRelatorio()" 
                        label="Salvar Relatório" 
                        icon="pi pi-save"
                        class="w-48"
                        styleClass="p-button-success">
                    </p-button>
                    <p-button 
                        (click)="imprimirRelatorio()" 
                        label="Imprimir" 
                        icon="pi pi-print"
                        class="w-48"
                        styleClass="p-button-info">
                    </p-button>
                </div>
            </p-card>
        </div>
    </div>

    <app-footer class="mt-auto"></app-footer>
</div>
